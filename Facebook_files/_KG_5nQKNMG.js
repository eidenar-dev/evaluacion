if (self.CavalryLogger) { CavalryLogger.start_js(["OvHBj"]); }

__d("CommercialBreakState",[],(function a(b,c,d,e,f,g){f.exports={INIT:"INIT",PREPARE:"PREPARE",AD_REQUEST_SENT:"AD_REQUEST_SENT",CB_SCHEDULED:"CB_SCHEDULED",ENTERING_TRANSITION:"ENTERING_TRANSITION",PLAY_AD_COUNTDOWN:"PLAY_AD_COUNTDOWN",LEAVING_TRANSITION:"LEAVING_TRANSITION",VOD_BREAK_WITH_NO_VIDEO_AD:"VOD_BREAK_WITH_NO_VIDEO_AD"};}),null);
__d('CommercialBreakHostStoryController',['csx','cx','CommercialBreakState','CSS','DOMQuery','StoryComponentVideoPlayerControllerRegistry'],(function a(b,c,d,e,f,g,h,i){function j(k,l,m,n){'use strict';this.$CommercialBreakHostStoryController1=null;this.$CommercialBreakHostStoryController5=null;this.$CommercialBreakHostStoryController2=m;this.$CommercialBreakHostStoryController4=k;if(n)this.$CommercialBreakHostStoryController8=n.toString();var o=c('DOMQuery').scry(l,".uiLikePageButton");if(o.length!==0)this.$CommercialBreakHostStoryController1=o[0];var p=c('DOMQuery').scry(l,"._5pbx");if(p.length!==0)this.$CommercialBreakHostStoryController5=p[0];c('StoryComponentVideoPlayerControllerRegistry').registerHostStoryController(this,this.$CommercialBreakHostStoryController8,this.$CommercialBreakHostStoryController9.bind(this));}j.prototype.getContainerElement=function(){'use strict';return this.$CommercialBreakHostStoryController3;};j.prototype.getInstanceID=function(){'use strict';return this.$CommercialBreakHostStoryController2;};j.prototype.$CommercialBreakHostStoryController9=function(k){'use strict';this.$CommercialBreakHostStoryController6=k;this.$CommercialBreakHostStoryController7=k.addListener('optionsChange',function(){return this.$CommercialBreakHostStoryController10();}.bind(this));this.$CommercialBreakHostStoryController10();};j.prototype.$CommercialBreakHostStoryController10=function(){'use strict';var k=this.$CommercialBreakHostStoryController6.getOption('VideoWithCommercialBreak','controller');if(k){this.$CommercialBreakHostStoryController7.remove();k.addListener('commercialBreak/stateChange',function(l){return this.$CommercialBreakHostStoryController11(l.state);}.bind(this));}};j.prototype.$CommercialBreakHostStoryController11=function(k){'use strict';if(k===c('CommercialBreakState').PLAY_AD_COUNTDOWN){this.$CommercialBreakHostStoryController12();}else this.$CommercialBreakHostStoryController13();};j.prototype.$CommercialBreakHostStoryController12=function(){'use strict';if(this.$CommercialBreakHostStoryController1)c('CSS').addClass(this.$CommercialBreakHostStoryController1,"_3fcl");c('CSS').addClass(this.$CommercialBreakHostStoryController4,"_3fcl");if(this.$CommercialBreakHostStoryController5)c('CSS').addClass(this.$CommercialBreakHostStoryController5,"_3fcl");};j.prototype.$CommercialBreakHostStoryController13=function(){'use strict';if(this.$CommercialBreakHostStoryController1)c('CSS').removeClass(this.$CommercialBreakHostStoryController1,"_3fcl");c('CSS').removeClass(this.$CommercialBreakHostStoryController4,"_3fcl");if(this.$CommercialBreakHostStoryController5)c('CSS').removeClass(this.$CommercialBreakHostStoryController5,"_3fcl");};f.exports=j;}),null);
__d('CommercialBreakSkywalkerSubscriptionManager',['Map','RTISubscriptionManager'],(function a(b,c,d,e,f,g){var h=new (c('Map'))(),i=new (c('Map'))(),j={subscribe:function k(l,m){var n;if(!h.has(l))(function(){var p=[];h.set(l,p);var q=c('RTISubscriptionManager').subscribe(l,function(r){for(var s=p,t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var v;if(t){if(u>=s.length)break;v=s[u++];}else{u=s.next();if(u.done)break;v=u.value;}var w=v;w(r);}});i.set(l,q);})();var o=h.get(l);if(o)o.push(m);return i.get(l);}};f.exports=j;}),null);
__d('CommercialBreakStartingIndicator.react',['cx','fbt','CircularProgressBar.react','CommercialBreakMobileEvent','CommercialBreakState','CSS','DateConsts','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){var j,k,l=300,m=300;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){'use strict';k.constructor.call(this,o);this.$CommercialBreakStartingIndicator1=null;this.$CommercialBreakStartingIndicator2=null;this.$CommercialBreakStartingIndicator4=0;this.$CommercialBreakStartingIndicator11=0;this.$CommercialBreakStartingIndicator12=0;this.state={percentComplete:-1,isPillShown:false};this.$CommercialBreakStartingIndicator3=new (c('SubscriptionsHandler'))();if(o.vodTransitionRedesign){this.$CommercialBreakStartingIndicator6=this.props.controller.addListener('optionsChange',function(){return this.$CommercialBreakStartingIndicator13();}.bind(this));this.$CommercialBreakStartingIndicator13();}}n.prototype.$CommercialBreakStartingIndicator13=function(){'use strict';if(!this.$CommercialBreakStartingIndicator1){var o=this.props.controller.getOption('VideoWithInstreamVideo','controller');this.$CommercialBreakStartingIndicator1=o&&o.getConfig();}if(!this.$CommercialBreakStartingIndicator5){var p=this.props.controller.getOption('VideoWithCommercialBreak','controller');this.$CommercialBreakStartingIndicator5=p&&p.addListener('commercialBreak/stateChange',function(q){return this.$CommercialBreakStartingIndicator14(q.state);}.bind(this));}if(this.$CommercialBreakStartingIndicator5)this.$CommercialBreakStartingIndicator6.remove();};n.prototype.$CommercialBreakStartingIndicator15=function(){'use strict';clearTimeout(this.$CommercialBreakStartingIndicator4);c('CSS').addClass(this.props.container,"_20dq");c('CSS').removeClass(this.$CommercialBreakStartingIndicator10,"_3ee4");c('CSS').removeClass(this.$CommercialBreakStartingIndicator9,"_3ee5");c('CSS').removeClass(this.$CommercialBreakStartingIndicator9,"_3ee4");c('CSS').removeClass(this.$CommercialBreakStartingIndicator7,"_3ee6");c('CSS').removeClass(this.$CommercialBreakStartingIndicator7,"_3ee4");c('CSS').removeClass(this.props.container,"_1xn2");this.setState({isPillShown:false,percentComplete:-1});};n.prototype.$CommercialBreakStartingIndicator16=function(o){'use strict';var p=this.props.controller.getCurrentTimePosition()*c('DateConsts').MS_PER_SEC,q=-1;if(p>o){clearTimeout(this.$CommercialBreakStartingIndicator4);}else if(this.$CommercialBreakStartingIndicator1&&this.$CommercialBreakStartingIndicator1.startingIndicatorMs&&p>o-this.$CommercialBreakStartingIndicator1.startingIndicatorMs)q=100-100*(o-p)/this.$CommercialBreakStartingIndicator1.startingIndicatorMs;this.setState({percentComplete:q});};n.prototype.$CommercialBreakStartingIndicator17=function(o){'use strict';var p=this.props.controller.getCurrentTimePosition()*c('DateConsts').MS_PER_SEC;if(p>o)return;clearTimeout(this.$CommercialBreakStartingIndicator4);if(!this.$CommercialBreakStartingIndicator1||!this.$CommercialBreakStartingIndicator1.startingIndicatorMs)return;this.$CommercialBreakStartingIndicator4=setInterval(function(){this.$CommercialBreakStartingIndicator16(o);}.bind(this),this.$CommercialBreakStartingIndicator1.startingIndicatorMs/100);};n.prototype.componentDidMount=function(){'use strict';this.$CommercialBreakStartingIndicator9.style.width=this.$CommercialBreakStartingIndicator8.clientWidth+27+'px';this.$CommercialBreakStartingIndicator3.addSubscriptions(this.props.controller.addListener('commercialBreak/vodBreakStarting',function(o){this.$CommercialBreakStartingIndicator17(o);}.bind(this)),this.props.controller.addListener('commercialBreak/vodBreakStarted',function(){if(!this.props.vodTransitionRedesign)this.$CommercialBreakStartingIndicator15();}.bind(this)),this.props.controller.addListener('seekRequested',this.$CommercialBreakStartingIndicator15.bind(this)));this.props.controller.registerOption('WatchAndScroll','hideOverlay',function(){return this.$CommercialBreakStartingIndicator2!==null;}.bind(this));this.props.controller.registerOption('VideoContextMenu','disablePauseMenuItem',function(){return this.$CommercialBreakStartingIndicator2!==null;}.bind(this));this.props.controller.registerOption('VideoWithInstreamVideo','disableClickToPause',function(){return this.$CommercialBreakStartingIndicator2!==null;}.bind(this));};n.prototype.componentWillUnmount=function(){'use strict';this.$CommercialBreakStartingIndicator3.release();if(this.$CommercialBreakStartingIndicator5)this.$CommercialBreakStartingIndicator5.remove();this.props.controller.unregisterOption('WatchAndScroll','hideOverlay');this.props.controller.unregisterOption('VideoContextMenu','disablePauseMenuItem');this.props.controller.unregisterOption('VideoWithInstreamVideo','disableClickToPause');};n.prototype.componentDidUpdate=function(){'use strict';if(this.props.vodTransitionRedesign&&!this.state.isPillShown&&this.state.percentComplete>=0){c('CSS').addClass(this.props.container,"_1xn2");this.setState({isPillShown:true});}};n.prototype.$CommercialBreakStartingIndicator14=function(o){'use strict';switch(o){case c('CommercialBreakState').ENTERING_TRANSITION:this.$CommercialBreakStartingIndicator18();break;case c('CommercialBreakState').PLAY_AD_COUNTDOWN:this.$CommercialBreakStartingIndicator19();break;}};n.prototype.$CommercialBreakStartingIndicator18=function(){'use strict';clearTimeout(this.$CommercialBreakStartingIndicator4);var o=this.$CommercialBreakStartingIndicator1;if(!o||!o.beginningNonLiveTransitionTimeMs)return;var p=o.beginningNonLiveTransitionTimeMs-l;if(p<l)return;this.$CommercialBreakStartingIndicator11=setTimeout(function(){clearTimeout(this.$CommercialBreakStartingIndicator11);c('CSS').addClass(this.$CommercialBreakStartingIndicator9,"_3ee4");}.bind(this),m);this.$CommercialBreakStartingIndicator12=setTimeout(function(){clearTimeout(this.$CommercialBreakStartingIndicator12);c('CSS').addClass(this.$CommercialBreakStartingIndicator7,"_3ee4");}.bind(this),p);c('CSS').addClass(this.$CommercialBreakStartingIndicator10,"_3ee4");c('CSS').addClass(this.$CommercialBreakStartingIndicator9,"_3ee5");c('CSS').addClass(this.$CommercialBreakStartingIndicator7,"_3ee6");};n.prototype.$CommercialBreakStartingIndicator19=function(){'use strict';if(this.$CommercialBreakStartingIndicator2){this.$CommercialBreakStartingIndicator2.release();this.$CommercialBreakStartingIndicator2=null;}this.$CommercialBreakStartingIndicator15();};n.prototype.$CommercialBreakStartingIndicator20=function(){'use strict';if(this.state.percentComplete>=0){if(!this.$CommercialBreakStartingIndicator2){this.$CommercialBreakStartingIndicator2=this.props.controller.getOption('VideoControls','acquireForceHideLock');this.props.controller.emit('adBreakIndicatorShowing');var o=this.props.controller.getOption('VideoWithInstreamVideo','controller');if(o)o.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_STARTING_INDICATOR);}}else if(!this.props.vodTransitionRedesign)if(this.$CommercialBreakStartingIndicator2){this.$CommercialBreakStartingIndicator2.release();this.$CommercialBreakStartingIndicator2=null;}};n.prototype.$CommercialBreakStartingIndicator21=function(){'use strict';if(this.$CommercialBreakStartingIndicator1&&this.$CommercialBreakStartingIndicator1.vodPreTransitionText)return this.$CommercialBreakStartingIndicator1.vodPreTransitionText;return i._("La pausa publicitaria comenzar\u00e1 en breve");};n.prototype.$CommercialBreakStartingIndicator22=function(){'use strict';if(this.$CommercialBreakStartingIndicator1&&this.$CommercialBreakStartingIndicator1.vodTransitionText)return this.$CommercialBreakStartingIndicator1.vodTransitionText;return i._("El video continuar\u00e1 despu\u00e9s del anuncio");};n.prototype.$CommercialBreakStartingIndicator23=function(){'use strict';if(this.$CommercialBreakStartingIndicator1)return this.$CommercialBreakStartingIndicator1.vodAdStartingIndicatorAlignment==='left';return false;};n.prototype.render=function(){'use strict';this.$CommercialBreakStartingIndicator20();if(this.$CommercialBreakStartingIndicator23())c('CSS').addClass(this.props.container,"_3ydn");if(this.$CommercialBreakStartingIndicator2)c('CSS').removeClass(this.props.container,"_20dq");return c('React').createElement('div',{className:"_3ee7 _3ee8"},c('React').createElement('div',{className:this.props.vodTransitionRedesign?"_1xne":'',ref:function(o){this.$CommercialBreakStartingIndicator9=o;}.bind(this)}),c('React').createElement('div',{className:"_3ee9",ref:function(o){this.$CommercialBreakStartingIndicator10=o;}.bind(this)},c('React').createElement('div',{className:"_20ds"},c('React').createElement(c('CircularProgressBar.react'),{percentComplete:this.state.percentComplete})),c('React').createElement('div',{className:"_4zpn",ref:function(o){this.$CommercialBreakStartingIndicator8=o;}.bind(this)},this.$CommercialBreakStartingIndicator21())),c('React').createElement('div',{className:"_3eea"+(!this.props.vodTransitionRedesign?' '+"_20dq":''),ref:function(o){this.$CommercialBreakStartingIndicator7=o;}.bind(this)},this.$CommercialBreakStartingIndicator22()));};f.exports=n;}),null);
__d('InstreamVideoAdsController',['Arbiter','CommercialBreakExperiments','CommercialBreakMobileEvent','DataAttributeUtils','DateConsts','DOMQuery','Map','MarauderLogger','NonBlockingIFrame','URI','ViewableImpressionConfig'],(function a(b,c,d,e,f,g){var h=null;function i(){'use strict';this.$InstreamVideoAdsController1=new (c('Map'))();}i.prototype.$InstreamVideoAdsController2=function(j){'use strict';var k=[];this.$InstreamVideoAdsController1.forEach(function(l,m){if(c('DOMQuery').contains(j,m.getRootNode()))k.push(m);});if(k.length===0)return null;return k[0];};i.prototype.$InstreamVideoAdsController3=function(j,k){'use strict';if(this.$InstreamVideoAdsController1.has(j))return;this.$InstreamVideoAdsController1.set(j,k);};i.registerVideoController=function(j,k){'use strict';if(h===null)h=new i();h.$InstreamVideoAdsController3(j,k);c('MarauderLogger').log(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_REGISTER_VIDEO,'commercial_break',{commercial_break_ad_client_token:j.getAdClientToken()});var l=h;j.once('beginPlayback',function(){if(c('CommercialBreakExperiments').instreamAdsNonXtrackableImpressionLogging){l.$InstreamVideoAdsController4(j);}else{c('MarauderLogger').log(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_ADS_LOADED,'commercial_break',{commercial_break_ad_client_token:j.getAdClientToken()});c('Arbiter').inform('CommercialBreak/AdsLoaded');}});};i.prototype.$InstreamVideoAdsController4=function(j){'use strict';var k=this.$InstreamVideoAdsController1.get(j);if(c('DOMQuery').contains(k,j.getRootNode())){var l=c('DataAttributeUtils').getDataAttribute(k,'data-xt'),m=Math.floor(Date.now()/c('DateConsts').MS_PER_SEC),n={xt:l,isv:1,cts:m};c('NonBlockingIFrame').loadIFrame(new (c('URI'))(c('ViewableImpressionConfig').impressionURL).addQueryData(n).toString());}};i.findVideoControllerForStory=function(j){'use strict';if(h===null)return null;return h.$InstreamVideoAdsController2(j);};f.exports=i;}),null);
__d('CommercialBreakVideoAdOverlay',['cx','Bootloader','CommercialBreakMobileEvent','CommercialBreakNoAdReason','CommercialBreakState','CSS','DOM','DOMDimensions','InstreamVideoAdsController','InstreamVideoAdType','SubscriptionsHandler','VideoPlayerFormats','VideoPlayerFormatsMap','VideoPlayerHTML5Experiments','VideoPlayerLoggerEvent','VideoPlayerLoggerEventField','VideoPlayerReason','VideoPlayerStates','getFullScreenElement'],(function a(b,c,d,e,f,g,h){function i(j,k){'use strict';this.$CommercialBreakVideoAdOverlay7=k;this.$CommercialBreakVideoAdOverlay9=false;this.$CommercialBreakVideoAdOverlay1=j;this.$CommercialBreakVideoAdOverlay10=false;this.$CommercialBreakVideoAdOverlay11=false;this.$CommercialBreakVideoAdOverlay12=0;this.$CommercialBreakVideoAdOverlay14=false;this.$CommercialBreakVideoAdOverlay15={};this.$CommercialBreakVideoAdOverlay16=0;this.$CommercialBreakVideoAdOverlay6=j.addListener('optionsChange',function(){return this.$CommercialBreakVideoAdOverlay17();}.bind(this));this.$CommercialBreakVideoAdOverlay17();}i.prototype.$CommercialBreakVideoAdOverlay17=function(){'use strict';this.$CommercialBreakVideoAdOverlay2=this.$CommercialBreakVideoAdOverlay1.getOption('VideoWithInstreamVideo','controller');if(!this.$CommercialBreakVideoAdOverlay2)return;this.$CommercialBreakVideoAdOverlay3=this.$CommercialBreakVideoAdOverlay1.getOption('VideoWithCommercialBreak','controller');if(!this.$CommercialBreakVideoAdOverlay3)return;this.$CommercialBreakVideoAdOverlay6.remove();this.$CommercialBreakVideoAdOverlay8=this.$CommercialBreakVideoAdOverlay2.getConfig();this.$CommercialBreakVideoAdOverlay3.addListener('commercialBreak/videoAdStoryFetched',function(j,k,l,m){if(j){c('DOM').setContent(this.$CommercialBreakVideoAdOverlay7,j);this.$CommercialBreakVideoAdOverlay10=true;this.$CommercialBreakVideoAdOverlay11=!k;this.$CommercialBreakVideoAdOverlay12=l;this.$CommercialBreakVideoAdOverlay2.setCurrentInstreamVideoAdBreakVideoID(m);}}.bind(this));this.$CommercialBreakVideoAdOverlay3.addListener('commercialBreak/videoAdPodFetched',function(j,k,l){if(j){this.$CommercialBreakVideoAdOverlay14=true;this.$CommercialBreakVideoAdOverlay15=j;this.$CommercialBreakVideoAdOverlay16=0;for(var m=0;this.$CommercialBreakVideoAdOverlay15[m];m++){var n=this.$CommercialBreakVideoAdOverlay15[m];if(n.videoAdStory){this.$CommercialBreakVideoAdOverlay10=true;this.$CommercialBreakVideoAdOverlay11=true;this.$CommercialBreakVideoAdOverlay12=l;c('DOM').appendContent(this.$CommercialBreakVideoAdOverlay7,n.videoAdStory);}}var o=this.$CommercialBreakVideoAdOverlay15[this.$CommercialBreakVideoAdOverlay16];if(o){var p=o.instreamVideoAdBreakVideoID;this.$CommercialBreakVideoAdOverlay2.setCurrentInstreamVideoAdBreakVideoID(p);}}}.bind(this));this.$CommercialBreakVideoAdOverlay3.addListener('commercialBreak/stateChange',function(j){var k=j.state;switch(k){case c('CommercialBreakState').ENTERING_TRANSITION:this.$CommercialBreakVideoAdOverlay13=this.$CommercialBreakVideoAdOverlay18();break;case c('CommercialBreakState').PLAY_AD_COUNTDOWN:this.$CommercialBreakVideoAdOverlay19();break;case c('CommercialBreakState').INIT:this.$CommercialBreakVideoAdOverlay20();break;case c('CommercialBreakState').LEAVING_TRANSITION:if(this.$CommercialBreakVideoAdOverlay8.isBroadcast)this.$CommercialBreakVideoAdOverlay20();break;}}.bind(this));this.$CommercialBreakVideoAdOverlay3.addListener('commercialBreak/inTransition',function(j){return this.$CommercialBreakVideoAdOverlay21(j.shouldShowAd);}.bind(this));};i.prototype.$CommercialBreakVideoAdOverlay22=function(j){var k;'use strict';if(this.$CommercialBreakVideoAdOverlay8.isLive)j.registerOption('VideoContextMenu','disablePauseMenuItem',function(){return true;});j.registerOption('CommercialBreakVideoAdOverlay','videoController',function(){return this.$CommercialBreakVideoAdOverlay1;}.bind(this));j.setLogEntryPropertyGetters((k={},k[c('VideoPlayerLoggerEventField').HOST_VIDEO_ID]=this.$CommercialBreakVideoAdOverlay8.hostVideoID,k[c('VideoPlayerLoggerEventField').INSTREAM_VIDEO_AD_BREAK_INDEX]=this.$CommercialBreakVideoAdOverlay12,k));j.addListener('stateChange',function(){if(!this.$CommercialBreakVideoAdOverlay4){this.$CommercialBreakVideoAdOverlay23();}else if(this.$CommercialBreakVideoAdOverlay4.isState(c('VideoPlayerStates').FINISHED))if(this.$CommercialBreakVideoAdOverlay14){this.$CommercialBreakVideoAdOverlay24();}else this.$CommercialBreakVideoAdOverlay23();}.bind(this));j.addListener('playRequested',function(l){if(l===c('VideoPlayerReason').USER)this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_PLAY_AD);}.bind(this));j.addListener('pauseRequested',function(l){if(l===c('VideoPlayerReason').USER)this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_PAUSE_AD);}.bind(this));if(this.$CommercialBreakVideoAdOverlay8.videoChannelCaller)j.addListener('clickVideo',this.$CommercialBreakVideoAdOverlay25.bind(this));this.$CommercialBreakVideoAdOverlay2.registerInstreamVideo(j);this.$CommercialBreakVideoAdOverlay26();this.$CommercialBreakVideoAdOverlay27();this.$CommercialBreakVideoAdOverlay28();};i.prototype.$CommercialBreakVideoAdOverlay29=function(){'use strict';var j=null,k=this.$CommercialBreakVideoAdOverlay2.getCurrentInstreamVideoAdType();switch(k){case c('InstreamVideoAdType').LIVE:if(this.$CommercialBreakVideoAdOverlay3.getIsDuplicateVideo()){j=c('CommercialBreakNoAdReason').DUPLICATE_VIDEO;}else if(!this.$CommercialBreakVideoAdOverlay10){j=c('CommercialBreakNoAdReason').WAIT_FOR_FAILED;}else if(!this.$CommercialBreakVideoAdOverlay11){j=c('CommercialBreakNoAdReason').NO_VIDEO_AD;}else j=c('CommercialBreakNoAdReason').PLAYBACK_ERROR;this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_STATIC_COUNTDOWN,{commercial_break_no_ad_reason:j});break;case c('InstreamVideoAdType').VOD:case c('InstreamVideoAdType').NONLIVE:j=c('CommercialBreakNoAdReason').PLAYBACK_ERROR;this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(this.$CommercialBreakVideoAdOverlay8.disableNoAdTransition?c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_START_SHOW_NOTHING:c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_NO_AD_TRANSITION,{commercial_break_no_ad_reason:j});this.$CommercialBreakVideoAdOverlay3.reset();break;}};i.prototype.$CommercialBreakVideoAdOverlay23=function(){'use strict';if(this.$CommercialBreakVideoAdOverlay8.isBroadcast)this.$CommercialBreakVideoAdOverlay20();this.$CommercialBreakVideoAdOverlay3.onLeaveTransition();};i.prototype.$CommercialBreakVideoAdOverlay19=function(){'use strict';this.$CommercialBreakVideoAdOverlay9=false;this.$CommercialBreakVideoAdOverlay4=c('InstreamVideoAdsController').findVideoControllerForStory(this.$CommercialBreakVideoAdOverlay7);if(this.$CommercialBreakVideoAdOverlay4){this.$CommercialBreakVideoAdOverlay22(this.$CommercialBreakVideoAdOverlay4);}else this.$CommercialBreakVideoAdOverlay29();};i.prototype.$CommercialBreakVideoAdOverlay24=function(){'use strict';this.$CommercialBreakVideoAdOverlay16++;var j=this.$CommercialBreakVideoAdOverlay15[this.$CommercialBreakVideoAdOverlay16];if(!j){this.$CommercialBreakVideoAdOverlay23();}else{var k=j.videoAdStory,l=j.instreamVideoAdBreakVideoID;if(k){if(this.$CommercialBreakVideoAdOverlay7.children.length>0)c('DOM').remove(this.$CommercialBreakVideoAdOverlay7.children[0]);this.$CommercialBreakVideoAdOverlay2.setCurrentInstreamVideoAdBreakVideoID(l);var m=this.$CommercialBreakVideoAdOverlay4?this.$CommercialBreakVideoAdOverlay4.isMuted():true,n=this.$CommercialBreakVideoAdOverlay4?this.$CommercialBreakVideoAdOverlay4.getVolume():0;if(this.$CommercialBreakVideoAdOverlay5)this.$CommercialBreakVideoAdOverlay5.release();if(this.$CommercialBreakVideoAdOverlay4)this.$CommercialBreakVideoAdOverlay4.destroy();this.$CommercialBreakVideoAdOverlay4=null;this.$CommercialBreakVideoAdOverlay19();var o=this.$CommercialBreakVideoAdOverlay4;if(o){o.setVolume(n);if(m){o.mute();}else o.unmute();}}else this.$CommercialBreakVideoAdOverlay23();}};i.prototype.$CommercialBreakVideoAdOverlay18=function(){'use strict';var j=c('DOMDimensions').getElementDimensions(this.$CommercialBreakVideoAdOverlay1.getRootNode());if(this.$CommercialBreakVideoAdOverlay1.isFullscreen())j=c('DOMDimensions').getElementDimensions(c('getFullScreenElement')());return j;};i.prototype.$CommercialBreakVideoAdOverlay26=function(){'use strict';var j=this.$CommercialBreakVideoAdOverlay4;if(!j)return;var k=this.$CommercialBreakVideoAdOverlay18();if((!k.width||!k.height)&&this.$CommercialBreakVideoAdOverlay13)k=this.$CommercialBreakVideoAdOverlay13;j.setDimensions(k.width,k.height);};i.prototype.$CommercialBreakVideoAdOverlay27=function(){'use strict';var j=this.$CommercialBreakVideoAdOverlay4;if(!j)return;var k=this.$CommercialBreakVideoAdOverlay1.getSource();if(k)j.updateSource(k);};i.prototype.$CommercialBreakVideoAdOverlay30=function(){'use strict';if(this.$CommercialBreakVideoAdOverlay2.shouldPlayInstreamAd()){c('CSS').removeClass(this.$CommercialBreakVideoAdOverlay7,"_50m2");if(!this.$CommercialBreakVideoAdOverlay8.isBroadcast)this.$CommercialBreakVideoAdOverlay1.emit('commercialBreak/hideUFI');this.$CommercialBreakVideoAdOverlay2.playInstreamAd();}};i.prototype.$CommercialBreakVideoAdOverlay25=function(){'use strict';if(!this.$CommercialBreakVideoAdOverlay4||!this.$CommercialBreakVideoAdOverlay4.isState(c('VideoPlayerStates').PLAYING))return;var j=this.$CommercialBreakVideoAdOverlay1.getOption('VideoWithClickToChannelView','isChannelEligible'),k=this.$CommercialBreakVideoAdOverlay1.getOption('WatchAndScroll','isActive');if(j&&!k)c('Bootloader').loadModules(["VideoChannelController"],function(l){l.openFromVideoPlayer(this.$CommercialBreakVideoAdOverlay1,this.$CommercialBreakVideoAdOverlay1.getVideoChannelID(),this.$CommercialBreakVideoAdOverlay8.videoChannelCaller);}.bind(this),'CommercialBreakVideoAdOverlay');};i.prototype.$CommercialBreakVideoAdOverlay21=function(j){'use strict';if(j){this.$CommercialBreakVideoAdOverlay4=c('InstreamVideoAdsController').findVideoControllerForStory(this.$CommercialBreakVideoAdOverlay7);this.$CommercialBreakVideoAdOverlay26();if(this.$CommercialBreakVideoAdOverlay4)c('CSS').removeClass(this.$CommercialBreakVideoAdOverlay7,"_50m2");}else this.$CommercialBreakVideoAdOverlay20();};i.prototype.$CommercialBreakVideoAdOverlay28=function(){'use strict';if(this.$CommercialBreakVideoAdOverlay9)return;this.$CommercialBreakVideoAdOverlay9=true;this.$CommercialBreakVideoAdOverlay5=new (c('SubscriptionsHandler'))();this.$CommercialBreakVideoAdOverlay5.addSubscriptions(this.$CommercialBreakVideoAdOverlay1.addListener('VideoChannelController/enterChannel',this.$CommercialBreakVideoAdOverlay26.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener('VideoChannelController/exitChannel',this.$CommercialBreakVideoAdOverlay26.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener('TahoeController/exitTahoe',this.$CommercialBreakVideoAdOverlay26.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener('toggleFullscreen',function(){this.$CommercialBreakVideoAdOverlay26();if(this.$CommercialBreakVideoAdOverlay4){var j=this.$CommercialBreakVideoAdOverlay4;if(c('VideoPlayerHTML5Experiments').deprecateEnteredExitedFsEvents){j.logEvent(c('VideoPlayerLoggerEvent').PLAYER_FORMAT_CHANGED,j.isFullscreen()?{player_format:c('VideoPlayerFormats').FULL_SCREEN}:{player_format:!j.$CommercialBreakVideoAdOverlay31?c('VideoPlayerFormats').INLINE:c('VideoPlayerFormatsMap')[j.$CommercialBreakVideoAdOverlay31]});}else j.logEvent(j.isFullscreen()?c('VideoPlayerLoggerEvent').ENTERED_FS:c('VideoPlayerLoggerEvent').EXITED_FS);}}.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener('WatchAndScroll/positionUpdated',this.$CommercialBreakVideoAdOverlay26.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener('commercialBreak/scrollAway',function(){if(this.$CommercialBreakVideoAdOverlay4&&this.$CommercialBreakVideoAdOverlay4.isState(c('VideoPlayerStates').PLAYING)){this.$CommercialBreakVideoAdOverlay4.pause(c('VideoPlayerReason').AUTOPLAY);this.$CommercialBreakVideoAdOverlay1.once('commercialBreak/scrollInto',function(){if(this.$CommercialBreakVideoAdOverlay9&&this.$CommercialBreakVideoAdOverlay4&&this.$CommercialBreakVideoAdOverlay4.isState(c('VideoPlayerStates').PAUSED))this.$CommercialBreakVideoAdOverlay4.play(c('VideoPlayerReason').AUTOPLAY);}.bind(this));}}.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener('commercialBreak/scrollInto',function(){if(this.$CommercialBreakVideoAdOverlay9&&this.$CommercialBreakVideoAdOverlay4&&this.$CommercialBreakVideoAdOverlay4.isState(c('VideoPlayerStates').READY))this.$CommercialBreakVideoAdOverlay30();}.bind(this)));this.$CommercialBreakVideoAdOverlay30();};i.prototype.$CommercialBreakVideoAdOverlay20=function(){'use strict';if(!this.$CommercialBreakVideoAdOverlay9)return;this.$CommercialBreakVideoAdOverlay9=false;this.$CommercialBreakVideoAdOverlay10=false;this.$CommercialBreakVideoAdOverlay11=false;this.$CommercialBreakVideoAdOverlay12=0;this.$CommercialBreakVideoAdOverlay14=false;this.$CommercialBreakVideoAdOverlay15={};this.$CommercialBreakVideoAdOverlay16=0;this.$CommercialBreakVideoAdOverlay2.setCurrentInstreamVideoAdBreakVideoID(null);c('CSS').addClass(this.$CommercialBreakVideoAdOverlay7,"_50m2");if(this.$CommercialBreakVideoAdOverlay4&&this.$CommercialBreakVideoAdOverlay4.isState(c('VideoPlayerStates').PLAYING))this.$CommercialBreakVideoAdOverlay4.pause(c('VideoPlayerReason').AUTOPLAY);this.$CommercialBreakVideoAdOverlay5.release();if(this.$CommercialBreakVideoAdOverlay4)this.$CommercialBreakVideoAdOverlay4.destroy();this.$CommercialBreakVideoAdOverlay4=null;while(this.$CommercialBreakVideoAdOverlay7.children.length>0)c('DOM').remove(this.$CommercialBreakVideoAdOverlay7.children[0]);};f.exports=i;}),null);
__d('InstreamNFXHideType',[],(function a(b,c,d,e,f,g){f.exports={HIDE_AD:'HIDE_AD',HIDE_AD_BREAKS:'HIDE_AD_BREAKS'};}),null);
__d('CountdownTimer.react',['fbt','React'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes,l=1000,m=3600,n=m*24*l;function o(t){if(t<10){return "0"+t;}else return t.toString();}function p(t,u){var v=0;while(v<t.length&&u(t[v]))v+=1;return t.slice(v);}function q(t){t=p(t,function(v){return v===0;});if(t.length===0){return "0";}else{for(var u=1;u<t.length;u+=1)t[u]=o(t[u]);return t.join(":");}}var r={HUMAN:'human',DIGITAL:'digital'};i=babelHelpers.inherits(s,c('React').Component);j=i&&i.prototype;function s(){var t,u;'use strict';for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=j.constructor).call.apply(t,[this].concat(w)),this.$CountdownTimer1=function(){return Math.max(this.props.endTime-Date.now(),0);}.bind(this),this.$CountdownTimer2=function(){var y=this.$CountdownTimer1();this.setState({remainingTime:y});if(y<=0){clearInterval(this.interval);if(this.props.onComplete)this.props.onComplete();}}.bind(this),this.formatTime=function(y,z,aa){if(this.props.format==r.DIGITAL){return q([y,z,aa]);}else if(this.props.format==r.HUMAN){return h._({"*":{"*":{"*":"{hours}h {mins}m {seconds}s"}}},[h.param('hours',y,[0]),h.param('mins',z,[0]),h.param('seconds',aa,[0])]);}else throw new Error('Unknown format: '+this.props.format);}.bind(this),this.state={remainingTime:this.$CountdownTimer1()},u;}s.prototype.componentDidMount=function(){'use strict';this.$CountdownTimer2();this.interval=setInterval(this.$CountdownTimer2,l);};s.prototype.componentWillUnmount=function(){'use strict';clearInterval(this.interval);};s.prototype.render=function(){'use strict';var t=this.state.remainingTime;if(t>=n){var u=Math.floor(t/n);return c('React').createElement('span',null,u===1?h._("1 d\u00eda"):h._({"*":"{number} d\u00edas"},[h.param('number',u,[0])]));}else{var v=Math.ceil(t/l),w=Math.floor(v/m),x=new Date(v%m*l),y=x.getUTCMinutes(),z=x.getSeconds();return c('React').createElement('span',null,this.formatTime(w,y,z));}};s.propTypes={endTime:k.number.isRequired,format:k.oneOf([r.HUMAN,r.DIGITAL]).isRequired,onComplete:k.func};f.exports=s;}),null);
__d('VideoCommercialBreakTransitionOverlay',['cx','fbt','CommercialBreakState','CountdownTimer.react','CSS','React','ReactDOM','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){var j=300,k=300;function l(m,n,o){'use strict';this.$VideoCommercialBreakTransitionOverlay9=0;this.$VideoCommercialBreakTransitionOverlay10=0;this.$VideoCommercialBreakTransitionOverlay1=n;this.$VideoCommercialBreakTransitionOverlay2=o;this.$VideoCommercialBreakTransitionOverlay7=new (c('SubscriptionsHandler'))();this.$VideoCommercialBreakTransitionOverlay4=m;this.$VideoCommercialBreakTransitionOverlay5=m.addListener('optionsChange',function(){return this.$VideoCommercialBreakTransitionOverlay11();}.bind(this));this.$VideoCommercialBreakTransitionOverlay11();}l.prototype.$VideoCommercialBreakTransitionOverlay11=function(){'use strict';this.$VideoCommercialBreakTransitionOverlay3=this.$VideoCommercialBreakTransitionOverlay4.getOption('VideoWithCommercialBreak','controller');if(!this.$VideoCommercialBreakTransitionOverlay3)return;var m=this.$VideoCommercialBreakTransitionOverlay4.getOption('VideoWithInstreamVideo','controller');if(!m)return;this.$VideoCommercialBreakTransitionOverlay6=m.getConfig();this.$VideoCommercialBreakTransitionOverlay5.remove();this.$VideoCommercialBreakTransitionOverlay7.engage();this.$VideoCommercialBreakTransitionOverlay7.addSubscriptions(this.$VideoCommercialBreakTransitionOverlay3.addListener('commercialBreak/stateChange',function(n){var o=n.state,p=n.countdownDurationMsecs;this.$VideoCommercialBreakTransitionOverlay12(o,p);}.bind(this)));this.$VideoCommercialBreakTransitionOverlay4.addListener('VideoChannelController/exitChannel',this.$VideoCommercialBreakTransitionOverlay13.bind(this));this.$VideoCommercialBreakTransitionOverlay4.addListener('stateChange',this.$VideoCommercialBreakTransitionOverlay13.bind(this));};l.prototype.$VideoCommercialBreakTransitionOverlay12=function(m,n){'use strict';this.$VideoCommercialBreakTransitionOverlay8=m;switch(m){case c('CommercialBreakState').ENTERING_TRANSITION:case c('CommercialBreakState').VOD_BREAK_WITH_NO_VIDEO_AD:this.$VideoCommercialBreakTransitionOverlay14();break;case c('CommercialBreakState').PLAY_AD_COUNTDOWN:this.$VideoCommercialBreakTransitionOverlay15(n);break;case c('CommercialBreakState').LEAVING_TRANSITION:this.$VideoCommercialBreakTransitionOverlay16();break;case c('CommercialBreakState').INIT:this.$VideoCommercialBreakTransitionOverlay17();break;}this.$VideoCommercialBreakTransitionOverlay13();};l.prototype.$VideoCommercialBreakTransitionOverlay14=function(){'use strict';if(this.$VideoCommercialBreakTransitionOverlay6.isBroadcast){this.$VideoCommercialBreakTransitionOverlay18(i._("regresar\u00e1 enseguida"),null);this.$VideoCommercialBreakTransitionOverlay4.emit('commercialBreak/hideUFI');}else this.$VideoCommercialBreakTransitionOverlay19();};l.prototype.$VideoCommercialBreakTransitionOverlay19=function(){'use strict';if(!this.$VideoCommercialBreakTransitionOverlay6.beginningNonLiveTransitionTimeMs)return;this.$VideoCommercialBreakTransitionOverlay20();var m=Math.max(j,this.$VideoCommercialBreakTransitionOverlay6.beginningNonLiveTransitionTimeMs-j);c('CSS').addClass(this.$VideoCommercialBreakTransitionOverlay2,"_hax");this.$VideoCommercialBreakTransitionOverlay9=setTimeout(function(){clearTimeout(this.$VideoCommercialBreakTransitionOverlay9);this.$VideoCommercialBreakTransitionOverlay3.emit('commercialBreak/inTransition',{shouldShowAd:true});c('CSS').addClass(this.$VideoCommercialBreakTransitionOverlay2,"_hay");}.bind(this),m);};l.prototype.$VideoCommercialBreakTransitionOverlay16=function(){'use strict';if(this.$VideoCommercialBreakTransitionOverlay6.isBroadcast){this.$VideoCommercialBreakTransitionOverlay18(i._("ya est\u00e1 de regreso"),null);}else this.$VideoCommercialBreakTransitionOverlay21();};l.prototype.$VideoCommercialBreakTransitionOverlay21=function(){'use strict';if(!this.$VideoCommercialBreakTransitionOverlay6.endingNonLiveTransitionTimeMs)return;this.$VideoCommercialBreakTransitionOverlay20();c('CSS').addClass(this.$VideoCommercialBreakTransitionOverlay2,"_hax");this.$VideoCommercialBreakTransitionOverlay10=setTimeout(function(){clearTimeout(this.$VideoCommercialBreakTransitionOverlay10);this.$VideoCommercialBreakTransitionOverlay3.emit('commercialBreak/inTransition',{shouldShowAd:false});c('CSS').addClass(this.$VideoCommercialBreakTransitionOverlay2,"_hay");}.bind(this),k);};l.prototype.$VideoCommercialBreakTransitionOverlay20=function(){'use strict';c('CSS').removeClass(this.$VideoCommercialBreakTransitionOverlay2,"_hax");c('CSS').removeClass(this.$VideoCommercialBreakTransitionOverlay2,"_hay");};l.prototype.$VideoCommercialBreakTransitionOverlay15=function(m){'use strict';if(this.$VideoCommercialBreakTransitionOverlay6.isBroadcast)if(m){this.$VideoCommercialBreakTransitionOverlay18(i._("regresar\u00e1 en"),m);}else this.$VideoCommercialBreakTransitionOverlay18(i._("regresar\u00e1 enseguida"),null);};l.prototype.$VideoCommercialBreakTransitionOverlay18=function(m,n){'use strict';c('ReactDOM').unmountComponentAtNode(this.$VideoCommercialBreakTransitionOverlay2);var o=null;if(n)o=c('React').createElement('div',{className:"_4fih"},c('React').createElement(c('CountdownTimer.react'),{endTime:Date.now()+n,format:'digital'}));c('ReactDOM').render(c('React').createElement('div',null,c('React').createElement('div',{className:"_4fid"},m),o),this.$VideoCommercialBreakTransitionOverlay2);};l.prototype.$VideoCommercialBreakTransitionOverlay17=function(){'use strict';c('ReactDOM').unmountComponentAtNode(this.$VideoCommercialBreakTransitionOverlay2);this.$VideoCommercialBreakTransitionOverlay4.emit('commercialBreak/showUFI');clearTimeout(this.$VideoCommercialBreakTransitionOverlay9);clearTimeout(this.$VideoCommercialBreakTransitionOverlay10);};l.prototype.$VideoCommercialBreakTransitionOverlay22=function(){'use strict';c('CSS').addClass(this.$VideoCommercialBreakTransitionOverlay1,"_4fii");var m=this.$VideoCommercialBreakTransitionOverlay4&&this.$VideoCommercialBreakTransitionOverlay4.getVideoNode();if(m)c('CSS').removeClass(m,"_1_d3");};l.prototype.$VideoCommercialBreakTransitionOverlay23=function(){'use strict';c('CSS').removeClass(this.$VideoCommercialBreakTransitionOverlay1,"_4fii");if(this.$VideoCommercialBreakTransitionOverlay6.isBroadcast)c('CSS').addClass(this.$VideoCommercialBreakTransitionOverlay4.getVideoNode(),"_1_d3");};l.prototype.$VideoCommercialBreakTransitionOverlay13=function(){'use strict';switch(this.$VideoCommercialBreakTransitionOverlay8){case c('CommercialBreakState').ENTERING_TRANSITION:case c('CommercialBreakState').LEAVING_TRANSITION:this.$VideoCommercialBreakTransitionOverlay23();break;case c('CommercialBreakState').VOD_BREAK_WITH_NO_VIDEO_AD:case c('CommercialBreakState').PLAY_AD_COUNTDOWN:if(this.$VideoCommercialBreakTransitionOverlay6.isBroadcast){this.$VideoCommercialBreakTransitionOverlay23();}else this.$VideoCommercialBreakTransitionOverlay22();break;default:this.$VideoCommercialBreakTransitionOverlay22();}};f.exports=l;}),null);
__d("XInstreamVideoSponsoredStoryAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/instream_video\/view\/story\/async\/",{host_video_id:{type:"FBID",required:true},instream_video_type:{type:"Enum",required:true,enumType:1},instream_video_break_index:{type:"Int",required:true},player_origin:{type:"String"},video_channel_caller:{type:"Enum",enumType:1},is_sponsored_host_video:{type:"Bool",defaultValue:false},referrer:{type:"String"},option_menu_button_id:{type:"String"},host_video_stall_count:{type:"Int"},ad_break_duration_ms:{type:"Int"}});}),null);
__d('VideoWithCommercialBreak',['cx','AsyncRequest','BanzaiODS','Base64','CommercialBreakExperiments','CommercialBreakHostStoryComponentType','CommercialBreakMobileEvent','CommercialBreakSkywalkerSubscriptionManager','CommercialBreakState','CSS','DataStore','DateConsts','EntstreamFeedObjectFollowup','EventEmitter','InstreamNFXHideType','RTISubscriptionManager','StoryComponentVideoPlayerControllerRegistry','SubscriptionsHandler','VideoPlayerLoggerSource','VideoPlayerReason','VideoPlayerStates','XInstreamVideoSponsoredStoryAsyncController','hasAdblock'],(function a(b,c,d,e,f,g,h){var i,j,k={INTENT:'intent',START:'start'},l={SHORT_AD_COUNTDOWN_MS:3000},m={NONE:'none',PLAYBACK_FINISHED:'playback_finished',CUT_OFF:'cut_off',HIDE_AD:'hide_ad',HIDE_AD_BREAKS:'hide_ad_breaks'},n={NORMAL:'normal',STALL_STREAM:'stall_stream',STREAM_DRY_OUT:'stream_dry_out'};i=babelHelpers.inherits(o,c('EventEmitter'));j=i&&i.prototype;function o(p){'use strict';j.constructor.call(this);this.$VideoWithCommercialBreak5=c('CommercialBreakState').INIT;this.$VideoWithCommercialBreak10=new (c('SubscriptionsHandler'))();this.$VideoWithCommercialBreak1=p;this.$VideoWithCommercialBreak11=null;this.$VideoWithCommercialBreak13=-1;this.$VideoWithCommercialBreak19=false;this.$VideoWithCommercialBreak12={};this.$VideoWithCommercialBreak22=0;this.$VideoWithCommercialBreak18=null;if(c('CommercialBreakExperiments').instreamAdsEnableNFX)c('StoryComponentVideoPlayerControllerRegistry').registerVideoPlayerController(this.$VideoWithCommercialBreak1,c('CommercialBreakHostStoryComponentType').POP_OVER_MENU);if(c('CommercialBreakExperiments').instreamAdsEnableGreyHostStory)c('StoryComponentVideoPlayerControllerRegistry').registerVideoPlayerController(this.$VideoWithCommercialBreak1,c('CommercialBreakHostStoryComponentType').HOST_STORY_HEADER);this.$VideoWithCommercialBreak2=p.addListener('optionsChange',function(){return this.$VideoWithCommercialBreak24();}.bind(this));this.$VideoWithCommercialBreak24();c('hasAdblock')(function(q){this.$VideoWithCommercialBreak21=q;}.bind(this));}o.prototype.$VideoWithCommercialBreak24=function(){'use strict';this.$VideoWithCommercialBreak9=this.$VideoWithCommercialBreak1.getOption('VideoWithInstreamVideo','controller');if(!this.$VideoWithCommercialBreak9)return;this.$VideoWithCommercialBreak2.remove();this.$VideoWithCommercialBreak4=this.$VideoWithCommercialBreak9.getConfig();this.reset();this.$VideoWithCommercialBreak1.registerOption('VideoWithCommercialBreak','enabled',function(){return true;});this.$VideoWithCommercialBreak1.registerOption('VideoWithCommercialBreak','controller',function(){return this;}.bind(this));this.$VideoWithCommercialBreak1.registerOption('VideoWithCommercialBreak','isInstreamPausedByNFX',this.$VideoWithCommercialBreak25.bind(this));if(this.$VideoWithCommercialBreak4.skywalkerTopic){if(c('RTISubscriptionManager').isSubscribed(this.$VideoWithCommercialBreak4.skywalkerTopic))this.$VideoWithCommercialBreak17=true;var p=c('CommercialBreakSkywalkerSubscriptionManager').subscribe(this.$VideoWithCommercialBreak4.skywalkerTopic,this.$VideoWithCommercialBreak26.bind(this));if(p){this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').SUBSCRIPTION_SUCCESS);if(this.$VideoWithCommercialBreak4.isLive){this.$VideoWithCommercialBreak1.addListener('commercialBreak/scrollAway',function(){if(this.$VideoWithCommercialBreak13<0)this.$VideoWithCommercialBreak13=Date.now();}.bind(this));this.$VideoWithCommercialBreak1.addListener('commercialBreak/scrollInto',function(){this.$VideoWithCommercialBreak13=-1;}.bind(this));}}else this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').SUBSCRIPTION_FAILURE);}};o.prototype.$VideoWithCommercialBreak27=function(){'use strict';return this.$VideoWithCommercialBreak4.isLive&&this.$VideoWithCommercialBreak23==='false'&&this.$VideoWithCommercialBreak11===null;};o.prototype.$VideoWithCommercialBreak28=function(p){var q=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];'use strict';if(p===this.$VideoWithCommercialBreak5)return;if(p===c('CommercialBreakState').ENTERING_TRANSITION&&this.$VideoWithCommercialBreak27()){this.reset();return;}q.state=p;if(p===c('CommercialBreakState').INIT){this.$VideoWithCommercialBreak9.resetInstreamVideo();this.$VideoWithCommercialBreak10.release();this.$VideoWithCommercialBreak10.engage();this.$VideoWithCommercialBreak11=null;}else if(p===c('CommercialBreakState').ENTERING_TRANSITION||p===c('CommercialBreakState').PLAY_AD_COUNTDOWN||p===c('CommercialBreakState').LEAVING_TRANSITION||p===c('CommercialBreakState').VOD_BREAK_WITH_NO_VIDEO_AD)this.$VideoWithCommercialBreak9.registerInstreamVideo(null);if(c('CommercialBreakExperiments').instreamAdsEnableNFX)if(p===c('CommercialBreakState').PLAY_AD_COUNTDOWN){if(this.$VideoWithCommercialBreak18){this.$VideoWithCommercialBreak1.emit('commercialBreak/updateOptionMenuURI',this.$VideoWithCommercialBreak18);this.$VideoWithCommercialBreak18=null;}}else if(p===c('CommercialBreakState').LEAVING_TRANSITION||p===c('CommercialBreakState').INIT){this.$VideoWithCommercialBreak1.emit('commercialBreak/recoverOptionMenuURI');this.$VideoWithCommercialBreak19=false;}this.$VideoWithCommercialBreak5=p;this.emit('commercialBreak/stateChange',q);};o.prototype.getIsCommercialBreakOngoing=function(){'use strict';return this.$VideoWithCommercialBreak5===c('CommercialBreakState').ENTERING_TRANSITION&&this.$VideoWithCommercialBreak4.isBroadcast||this.$VideoWithCommercialBreak5===c('CommercialBreakState').PLAY_AD_COUNTDOWN||this.$VideoWithCommercialBreak5===c('CommercialBreakState').LEAVING_TRANSITION||this.$VideoWithCommercialBreak5===c('CommercialBreakState').VOD_BREAK_WITH_NO_VIDEO_AD;};o.prototype.reset=function(){'use strict';this.$VideoWithCommercialBreak28(c('CommercialBreakState').INIT);this.$VideoWithCommercialBreak6=0;this.$VideoWithCommercialBreak22=0;this.$VideoWithCommercialBreak7=-1;this.$VideoWithCommercialBreak8=-1;this.$VideoWithCommercialBreak16=null;this.$VideoWithCommercialBreak19=false;this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(null);this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakVideoID(null);};o.prototype.$VideoWithCommercialBreak29=function(p){'use strict';var q=this.$VideoWithCommercialBreak12[p.type];if(!q)return false;var r=true;Object.keys(q).forEach(function(s){if(q[s]!==p[s])r=false;});return r;};o.prototype.$VideoWithCommercialBreak26=function(p){'use strict';p=JSON.parse(p.payload);if(this.$VideoWithCommercialBreak29(p)){this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_SKYWALKER_RECEIVED_DUPLICATE_EVENT);return;}var q=p.type;if(q===k.START){this.$VideoWithCommercialBreak12[k.START]=p;this.onStartCommand(p);}else if(q===k.INTENT){this.$VideoWithCommercialBreak12[k.INTENT]=p;this.onIntentCommand(p);}else this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').RECEIVE_INVALID_MSG);};o.prototype.onIntentCommand=function(p){'use strict';var q=p.commercial_break_length_ms?parseInt(p.commercial_break_length_ms,10):null,r=Object.prototype.hasOwnProperty.call(p,'index')?parseInt(p.index,10):0;if(this.$VideoWithCommercialBreak4.isLive&&p.type===k.INTENT){this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').RECEIVE_INTENT_MSG,{topic:this.$VideoWithCommercialBreak4.skywalkerTopic,commercial_break_length_ms:q,ad_break_index:r});if(this.$VideoWithCommercialBreak13>0&&Date.now()-this.$VideoWithCommercialBreak13>this.$VideoWithCommercialBreak4.maxDurationHostVideoOffscreenToFetchMs)return;}if(this.$VideoWithCommercialBreak5!==c('CommercialBreakState').INIT&&this.$VideoWithCommercialBreak5!==c('CommercialBreakState').PREPARE&&this.$VideoWithCommercialBreak5!==c('CommercialBreakState').AD_REQUEST_SENT)return;this.$VideoWithCommercialBreak28(c('CommercialBreakState').INIT);this.$VideoWithCommercialBreak28(c('CommercialBreakState').PREPARE);this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(r);if(this.$VideoWithCommercialBreak4.isLive&&q)this.$VideoWithCommercialBreak6=q;if(this.$VideoWithCommercialBreak17)return;var s=this.$VideoWithCommercialBreak9.getCurrentInstreamVideoAdType(),t=this.$VideoWithCommercialBreak1.getSource()===c('VideoPlayerLoggerSource').PERMALINK?document.referrer:null;if(!this.$VideoWithCommercialBreak4.hostVideoID||!s){c('BanzaiODS').bumpEntityKey('instreamads','missing_query_params');return;}var u={host_video_id:this.$VideoWithCommercialBreak4.hostVideoID,instream_video_type:s,instream_video_break_index:r,player_origin:this.$VideoWithCommercialBreak4.playerOrigin,is_sponsored_host_video:this.$VideoWithCommercialBreak4.isSponsored,video_channel_caller:this.$VideoWithCommercialBreak4.videoChannelCaller,host_video_stall_count:this.$VideoWithCommercialBreak1.getStallCount(),ad_break_duration_ms:q,referrer:t,option_menu_button_id:null};if(c('CommercialBreakExperiments').instreamAdsEnableNFX){var v=c('StoryComponentVideoPlayerControllerRegistry').findPopoverAsyncMenuForVideoPlayerController(this.$VideoWithCommercialBreak1);if(v)u.option_menu_button_id=v.getOptionsButtonID();this.$VideoWithCommercialBreak18=null;}this.$VideoWithCommercialBreak30(u);this.$VideoWithCommercialBreak28(c('CommercialBreakState').AD_REQUEST_SENT);};o.prototype.$VideoWithCommercialBreak30=function(p){'use strict';if(c('CommercialBreakExperiments').instreamAdsFetchFromFeedEndpoint&&!this.$VideoWithCommercialBreak21){var q='/ajax/pagelet/generic.php/LitestandTailLoadPagelet';new (c('AsyncRequest'))(q).setMethod('GET').setReadOnly(true).setData({data:c('Base64').encode(JSON.stringify(p))}).setHandler(this.$VideoWithCommercialBreak31.bind(this)).setErrorHandler(this.$VideoWithCommercialBreak32.bind(this)).send();}else{var r=c('XInstreamVideoSponsoredStoryAsyncController').getURIBuilder().setFBID('host_video_id',p.host_video_id).setEnum('instream_video_type',p.instream_video_type).setInt('instream_video_break_index',p.instream_video_break_index).setString('player_origin',p.player_origin).setEnum('video_channel_caller',p.video_channel_caller).setBool('is_sponsored_host_video',p.is_sponsored_host_video).setInt('host_video_stall_count',p.host_video_stall_count).setInt('ad_break_duration_ms',p.ad_break_duration_ms).setString('referrer',p.referrer).setString('option_menu_button_id',p.option_menu_button_id);new (c('AsyncRequest'))(r.getURI()).setMethod('GET').setReadOnly(true).setHandler(function(s){this.$VideoWithCommercialBreak33(s.getPayload());}.bind(this)).setErrorHandler(this.$VideoWithCommercialBreak32.bind(this)).send();}};o.prototype.$VideoWithCommercialBreak31=function(p){'use strict';this.$VideoWithCommercialBreak33(JSON.parse(c('Base64').decode(p.getPayload())));};o.prototype.$VideoWithCommercialBreak32=function(){'use strict';c('hasAdblock')(function(p){this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').VIDEO_FETCH_FAILURE,{is_ad_block_enabled:p});}.bind(this));};o.prototype.$VideoWithCommercialBreak33=function(p){'use strict';if(!this.$VideoWithCommercialBreak4.isBroadcast&&this.$VideoWithCommercialBreak5===c('CommercialBreakState').ENTERING_TRANSITION)return;if(this.$VideoWithCommercialBreak5!==c('CommercialBreakState').AD_REQUEST_SENT&&this.$VideoWithCommercialBreak5!==c('CommercialBreakState').CB_SCHEDULED&&this.$VideoWithCommercialBreak5!==c('CommercialBreakState').ENTERING_TRANSITION)return;var q=p.isEmpty,r=p.instreamVideoAdBreakIndex,s=p.instreamVideoAdType,t=p.videoAdPodContents,u=t?t[0]:null,v=u?u.videoAdStory:p.videoAdStory,w=u?u.instreamVideoAdBreakVideoID:p.instreamVideoAdBreakVideoID,x=u?u.instreamVideoOptionMenuURI:p.instreamVideoOptionMenuURI;if(p.shouldParseAdPods){if(t){this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').VIDEO_FETCH_SUCCESS,{is_empty:q});var y=this.$VideoWithCommercialBreak9.getCurrentInstreamVideoAdType();if(s===y){this.$VideoWithCommercialBreak11=q?null:r;this.emit('commercialBreak/videoAdPodFetched',t,q,r);}}else this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').VIDEO_FETCH_FAILURE);}else if(v){this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').VIDEO_FETCH_SUCCESS,{is_empty:q});var z=this.$VideoWithCommercialBreak9.getCurrentInstreamVideoAdType();if(s===z){this.$VideoWithCommercialBreak11=q?null:r;var aa=q?null:w;this.emit('commercialBreak/videoAdStoryFetched',v,q,r,aa);if(c('CommercialBreakExperiments').instreamAdsEnableNFX&&!q)this.$VideoWithCommercialBreak18=x;}}else this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').VIDEO_FETCH_FAILURE);};o.prototype.onStartCommand=function(p){'use strict';var q=parseInt(p.commercial_break_start_time_ms,10);this.$VideoWithCommercialBreak7=q;var r=this.$VideoWithCommercialBreak34();this.$VideoWithCommercialBreak8=r;this.$VideoWithCommercialBreak23=Object.prototype.hasOwnProperty.call(p,'commercial_break_drop_live_stream')?p.commercial_break_drop_live_stream:null;var s=Object.prototype.hasOwnProperty.call(p,'index')?parseInt(p.index,10):0;if(this.$VideoWithCommercialBreak4.isLive){this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').RECEIVE_START_MSG,{topic:this.$VideoWithCommercialBreak4.skywalkerTopic,commercial_break_start_time_ms:q,ad_break_index:s});if(q<r-this.$VideoWithCommercialBreak4.allowedStartTimeDeltaMs){if(this.$VideoWithCommercialBreak5!==c('CommercialBreakState').INIT)c('BanzaiODS').bumpEntityKey('instreamads','receive_start_after_break');return;}}if(this.$VideoWithCommercialBreak5!==c('CommercialBreakState').INIT&&this.$VideoWithCommercialBreak5!==c('CommercialBreakState').PREPARE&&this.$VideoWithCommercialBreak5!==c('CommercialBreakState').AD_REQUEST_SENT)return;this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(s);if(this.$VideoWithCommercialBreak5===c('CommercialBreakState').INIT){var t=p.commercial_break_length_ms?parseInt(p.commercial_break_length_ms,10):null;this.$VideoWithCommercialBreak6=t?t:this.$VideoWithCommercialBreak4.commercialBreakLengthMs;this.onIntentCommand(p);}this.$VideoWithCommercialBreak28(c('CommercialBreakState').CB_SCHEDULED);if(this.$VideoWithCommercialBreak4.isLive)this.$VideoWithCommercialBreak10.addSubscriptions(this.$VideoWithCommercialBreak1.addListener('streamInterrupted',this.$VideoWithCommercialBreak35.bind(this,true)));this.$VideoWithCommercialBreak3=this.$VideoWithCommercialBreak1.addListener('updateStatus',function(){return this.$VideoWithCommercialBreak35();}.bind(this));this.$VideoWithCommercialBreak35();};o.prototype.$VideoWithCommercialBreak35=function(){var p=arguments.length<=0||arguments[0]===undefined?false:arguments[0];'use strict';if(this.$VideoWithCommercialBreak5!==c('CommercialBreakState').CB_SCHEDULED){this.$VideoWithCommercialBreak3.remove();return;}var q=this.$VideoWithCommercialBreak34(),r=this.$VideoWithCommercialBreak7-q,s=r>0&&r<=this.$VideoWithCommercialBreak4.startFromStreamDryDeltaMs&&this.$VideoWithCommercialBreak1.isBuffering()&&this.$VideoWithCommercialBreak1.isState(c('VideoPlayerStates').PLAYING);if(!this.$VideoWithCommercialBreak4.isLive||Math.abs(r)<=this.$VideoWithCommercialBreak4.allowedStartTimeDeltaMs||s||p){this.$VideoWithCommercialBreak3.remove();var t=n.NORMAL;if(s){t=n.STALL_STREAM;}else if(p)t=n.STREAM_DRY_OUT;var u=this.$VideoWithCommercialBreak7-this.$VideoWithCommercialBreak8;this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_START,{timestamp_delta_ms:parseInt(r,10),timestamp_latency_ms:parseInt(u,10),playback_trigger_event:t,viewer_count:this.$VideoWithCommercialBreak36()});this.$VideoWithCommercialBreak28(c('CommercialBreakState').ENTERING_TRANSITION);this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_TRANSIT);var v=this.$VideoWithCommercialBreak4.isBroadcast?this.$VideoWithCommercialBreak4.beginningTransitionTimeMs:this.$VideoWithCommercialBreak4.beginningNonLiveTransitionTimeMs;setTimeout(this.$VideoWithCommercialBreak37.bind(this),v);}else if(q>this.$VideoWithCommercialBreak7){this.$VideoWithCommercialBreak3.remove();this.reset();}};o.prototype.$VideoWithCommercialBreak37=function(){'use strict';if(this.$VideoWithCommercialBreak5!==c('CommercialBreakState').CB_SCHEDULED&&this.$VideoWithCommercialBreak5!==c('CommercialBreakState').ENTERING_TRANSITION&&this.$VideoWithCommercialBreak5!==c('CommercialBreakState').PLAY_AD_COUNTDOWN)return;var p=this.$VideoWithCommercialBreak6-this.$VideoWithCommercialBreak4.beginningTransitionTimeMs,q=p-this.$VideoWithCommercialBreak4.endingTransitionTimeMs;if(this.$VideoWithCommercialBreak4.isLive)this.$VideoWithCommercialBreak22=q;this.$VideoWithCommercialBreak28(c('CommercialBreakState').PLAY_AD_COUNTDOWN,{countdownDurationMsecs:this.$VideoWithCommercialBreak4.isLive?q:0});if(this.$VideoWithCommercialBreak4.isLive){this.$VideoWithCommercialBreak14=true;setTimeout(function(){this.$VideoWithCommercialBreak14=false;}.bind(this),q-l.SHORT_AD_COUNTDOWN_MS);setTimeout(this.$VideoWithCommercialBreak38.bind(this),q);this.$VideoWithCommercialBreak15=false;setTimeout(this.$VideoWithCommercialBreak39.bind(this),p);setTimeout(this.$VideoWithCommercialBreak40.bind(this),p+this.$VideoWithCommercialBreak4.maxOverduePlayingTimeMs);}};o.prototype.onLeaveTransition=function(){'use strict';var p=this.$VideoWithCommercialBreak25();if(!this.$VideoWithCommercialBreak4.isLive){this.$VideoWithCommercialBreak16=p?this.$VideoWithCommercialBreak20==c('InstreamNFXHideType').HIDE_AD_BREAKS?m.HIDE_AD_BREAKS:m.HIDE_AD:m.PLAYBACK_FINISHED;this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_TRANSIT);this.$VideoWithCommercialBreak28(c('CommercialBreakState').LEAVING_TRANSITION);var q=this.$VideoWithCommercialBreak4.isBroadcast?this.$VideoWithCommercialBreak4.endingTransitionTimeMs:this.$VideoWithCommercialBreak4.endingNonLiveTransitionTimeMs;setTimeout(function(){this.$VideoWithCommercialBreak41();this.reset();}.bind(this),q);return;}if(this.$VideoWithCommercialBreak5===c('CommercialBreakState').PLAY_AD_COUNTDOWN)if(!this.$VideoWithCommercialBreak9.getIsAdActive()){this.$VideoWithCommercialBreak16=m.NONE;this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_TRANSIT);this.$VideoWithCommercialBreak28(c('CommercialBreakState').LEAVING_TRANSITION);}else if((this.$VideoWithCommercialBreak9.isState(c('VideoPlayerStates').FINISHED)||this.$VideoWithCommercialBreak9.isState(c('VideoPlayerStates').DESTROYED))&&!this.$VideoWithCommercialBreak14||p){this.$VideoWithCommercialBreak16=p?m.HIDE_AD:m.PLAYBACK_FINISHED;if(this.$VideoWithCommercialBreak15){this.$VideoWithCommercialBreak41();this.reset();}else{this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_TRANSIT);this.$VideoWithCommercialBreak28(c('CommercialBreakState').LEAVING_TRANSITION);}}};o.prototype.$VideoWithCommercialBreak39=function(){'use strict';if(this.$VideoWithCommercialBreak5===c('CommercialBreakState').LEAVING_TRANSITION){this.$VideoWithCommercialBreak41();this.reset();}else if(this.$VideoWithCommercialBreak5===c('CommercialBreakState').PLAY_AD_COUNTDOWN)this.$VideoWithCommercialBreak15=true;};o.prototype.$VideoWithCommercialBreak40=function(){'use strict';if(this.$VideoWithCommercialBreak25())return;if(this.$VideoWithCommercialBreak5===c('CommercialBreakState').PLAY_AD_COUNTDOWN){this.$VideoWithCommercialBreak16=m.CUT_OFF;this.$VideoWithCommercialBreak41();this.reset();}};o.prototype.$VideoWithCommercialBreak38=function(){'use strict';if(this.$VideoWithCommercialBreak25())return;this.onLeaveTransition();};o.prototype.$VideoWithCommercialBreak41=function(){'use strict';if(this.$VideoWithCommercialBreak9.getIsVisibleForAutoplay())this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_END,{ending_reason:this.$VideoWithCommercialBreak16});};o.prototype.$VideoWithCommercialBreak34=function(){'use strict';var p=this.$VideoWithCommercialBreak1.getCurrentTimePosition()*c('DateConsts').MS_PER_SEC;return p;};o.prototype.$VideoWithCommercialBreak36=function(){'use strict';if(!this.$VideoWithCommercialBreak4.isLive)return null;var p=this.$VideoWithCommercialBreak1.getOption('VideoWithLiveBroadcast','viewCount'),q=p&&JSON.parse(c('DataStore').get(p,'store',null));return q?q.viewerCount:null;};o.prototype.$VideoWithCommercialBreak25=function(){'use strict';var p=this.$VideoWithCommercialBreak9.getAdController();return p&&p.isState(c('VideoPlayerStates').PAUSED)&&this.$VideoWithCommercialBreak5===c('CommercialBreakState').PLAY_AD_COUNTDOWN&&this.$VideoWithCommercialBreak19;};o.prototype.startBreakWithNoVideoAd=function(p,q,r){'use strict';this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(r);if(this.$VideoWithCommercialBreak4.disableNoAdTransition||!this.$VideoWithCommercialBreak4.isBroadcast){this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_START_SHOW_NOTHING,{commercial_break_no_ad_reason:p});this.reset();return;}var s=q-this.$VideoWithCommercialBreak34();this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_START,{timestamp_delta_ms:parseInt(s,10),playback_trigger_event:'normal'});this.$VideoWithCommercialBreak28(c('CommercialBreakState').VOD_BREAK_WITH_NO_VIDEO_AD);this.$VideoWithCommercialBreak9.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_NO_AD_TRANSITION,{commercial_break_no_ad_reason:p});setTimeout(function(){this.$VideoWithCommercialBreak16=m.NONE;this.$VideoWithCommercialBreak41();this.reset();}.bind(this),this.$VideoWithCommercialBreak4.breakWithNoVideoAdDurationMs);};o.prototype.hasReceivedAdStory=function(p){'use strict';return p===this.$VideoWithCommercialBreak11;};o.prototype.getIsDuplicateVideo=function(){'use strict';return this.$VideoWithCommercialBreak17;};o.prototype.onPauseAdFromNFX=function(){'use strict';if(this.$VideoWithCommercialBreak5!==c('CommercialBreakState').PLAY_AD_COUNTDOWN)return;this.$VideoWithCommercialBreak19=true;c('EntstreamFeedObjectFollowup').addInstreamAdsFollowup(this.$VideoWithCommercialBreak1.getRootNode());var p=this.$VideoWithCommercialBreak9.getAdController();if(p){p.pause(c('VideoPlayerReason').USER);c('CSS').addClass(p.getVideoNode(),"_1_d3");c('CSS').addClass(p.getRootNode(),"_4ap-");}};o.prototype.onPlayAdFromNFX=function(){'use strict';if(this.$VideoWithCommercialBreak5!==c('CommercialBreakState').PLAY_AD_COUNTDOWN)return;var p=this.$VideoWithCommercialBreak9.getAdController();if(p){this.$VideoWithCommercialBreak19=false;c('CSS').removeClass(p.getVideoNode(),"_1_d3");c('CSS').removeClass(p.getRootNode(),"_4ap-");this.$VideoWithCommercialBreak9.play(c('VideoPlayerReason').USER);}};o.prototype.onLeaveAdFromNFX=function(p){'use strict';if(this.$VideoWithCommercialBreak5!==c('CommercialBreakState').PLAY_AD_COUNTDOWN)return;this.$VideoWithCommercialBreak20=p;this.onLeaveTransition();this.$VideoWithCommercialBreak19=false;this.$VideoWithCommercialBreak20=null;};o.prototype.getLiveCountdownDurationMs=function(){'use strict';return this.$VideoWithCommercialBreak22;};f.exports=o;}),null);
__d('VodWithCommercialBreak',['CommercialBreakExperiments','CommercialBreakMobileEvent','CommercialBreakNoAdReason','DateConsts','VideoPlayerStates','Visibility'],(function a(b,c,d,e,f,g){var h={RECHECK_START_MS:300};function i(j,k){'use strict';this.$VodWithCommercialBreak1=k;this.$VodWithCommercialBreak4=j;this.$VodWithCommercialBreak7=false;this.$VodWithCommercialBreak8=-1;this.$VodWithCommercialBreak11=0;this.$VodWithCommercialBreak12=0;this.$VodWithCommercialBreak3=j.addListener('optionsChange',function(){return this.$VodWithCommercialBreak13();}.bind(this));this.$VodWithCommercialBreak13();}i.prototype.$VodWithCommercialBreak14=function(){'use strict';if(this.$VodWithCommercialBreak9)clearTimeout(this.$VodWithCommercialBreak9);if(this.$VodWithCommercialBreak10)clearTimeout(this.$VodWithCommercialBreak10);this.$VodWithCommercialBreak9=null;this.$VodWithCommercialBreak10=null;this.$VodWithCommercialBreak8=-1;};i.prototype.$VodWithCommercialBreak13=function(){'use strict';this.$VodWithCommercialBreak5=this.$VodWithCommercialBreak4.getOption('VideoWithInstreamVideo','controller');this.$VodWithCommercialBreak6=this.$VodWithCommercialBreak4.getOption('VideoWithCommercialBreak','controller');if(!this.$VodWithCommercialBreak5||!this.$VodWithCommercialBreak6)return;this.$VodWithCommercialBreak3.remove();this.$VodWithCommercialBreak2=this.$VodWithCommercialBreak5.getConfig();if(this.$VodWithCommercialBreak4.isState(c('VideoPlayerStates').PLAYING))this.$VodWithCommercialBreak15();this.$VodWithCommercialBreak4.addListener('beginPlayback',this.$VodWithCommercialBreak15.bind(this));this.$VodWithCommercialBreak4.addListener('pausePlayback',this.$VodWithCommercialBreak16.bind(this));};i.prototype.$VodWithCommercialBreak15=function(){'use strict';if(!this.$VodWithCommercialBreak7){this.$VodWithCommercialBreak7=true;this.$VodWithCommercialBreak5.logMarauderEvent(c('CommercialBreakMobileEvent').COMMERCIAL_BREAK_ELIGIBLE_VOD_START,{number_of_breaks:this.$VodWithCommercialBreak1.length});}if(this.$VodWithCommercialBreak11===0)this.$VodWithCommercialBreak11=Date.now();var j=this.$VodWithCommercialBreak17();if(j===0){this.$VodWithCommercialBreak4.once('updateStatus',this.$VodWithCommercialBreak15.bind(this));return;}var k=this.$VodWithCommercialBreak18(j);if(k===this.$VodWithCommercialBreak8)k+=1;this.$VodWithCommercialBreak19(k,j);};i.prototype.$VodWithCommercialBreak16=function(){'use strict';if(this.$VodWithCommercialBreak11>0)this.$VodWithCommercialBreak12+=Date.now()-this.$VodWithCommercialBreak11;this.$VodWithCommercialBreak11=0;this.$VodWithCommercialBreak14();};i.prototype.$VodWithCommercialBreak18=function(j){'use strict';var k=this.$VodWithCommercialBreak1.length;for(var l=this.$VodWithCommercialBreak1.length-1;l>=0;l--){var m=this.$VodWithCommercialBreak1[l].getTimeOffsetInMs();if(m&&m>j+this.$VodWithCommercialBreak2.vodAllowStartTimeDeltaMs){k=l;}else break;}return k;};i.prototype.$VodWithCommercialBreak19=function(j,k){'use strict';this.$VodWithCommercialBreak14();if(j>=this.$VodWithCommercialBreak1.length)return;var l=this.$VodWithCommercialBreak1[j].getTimeOffsetInMs();if(!l)return;var m=l-k,n=m-this.$VodWithCommercialBreak2.vodPrefetchTimeMs;if(m<0){this.$VodWithCommercialBreak15();return;}if(n<=this.$VodWithCommercialBreak2.vodAllowIntentTimeDeltaMs){this.$VodWithCommercialBreak20(j);}else this.$VodWithCommercialBreak9=setTimeout(function(){return this.$VodWithCommercialBreak20(j);}.bind(this),n);if(!this.$VodWithCommercialBreak2.isBroadcast)m-=this.$VodWithCommercialBreak2.startingIndicatorMs;if(m<=this.$VodWithCommercialBreak2.vodAllowStartTimeDeltaMs){this.$VodWithCommercialBreak21(j);}else this.$VodWithCommercialBreak10=setTimeout(function(){return this.$VodWithCommercialBreak21(j);}.bind(this),m);};i.prototype.$VodWithCommercialBreak20=function(j){'use strict';var k=this.$VodWithCommercialBreak17(),l=this.$VodWithCommercialBreak1[j],m=l.getTimeOffsetInMs();if(!m)return;var n=m-this.$VodWithCommercialBreak2.vodPrefetchTimeMs,o=n-k;if(o>this.$VodWithCommercialBreak2.vodAllowIntentTimeDeltaMs){this.$VodWithCommercialBreak9=setTimeout(function(){return this.$VodWithCommercialBreak20(j);}.bind(this),o);return;}var p=this.$VodWithCommercialBreak12+m-k;if(this.$VodWithCommercialBreak11>0)p+=Date.now()-this.$VodWithCommercialBreak11;var q=!this.$VodWithCommercialBreak6.hasReceivedAdStory(l.getIndex())&&p>=this.$VodWithCommercialBreak2.vodMinWatchTimeSeconds*c('DateConsts').MS_PER_SEC;if(q){this.$VodWithCommercialBreak6.reset();this.$VodWithCommercialBreak6.onIntentCommand({index:l.getIndex(),commercial_break_length_ms:l.getAdBreakDurationInMs()});}this.$VodWithCommercialBreak9=null;};i.prototype.$VodWithCommercialBreak21=function(j){'use strict';var k=this.$VodWithCommercialBreak17(),l=this.$VodWithCommercialBreak1[j],m=l.getTimeOffsetInMs();if(!m)return;var n=m-k,o=this.$VodWithCommercialBreak12+n;if(this.$VodWithCommercialBreak11>0)o+=Date.now()-this.$VodWithCommercialBreak11;var p=null;if(o<this.$VodWithCommercialBreak2.vodMinWatchTimeSeconds*c('DateConsts').MS_PER_SEC){p=c('CommercialBreakNoAdReason').TIME_SPENT_INSUFFICIENT;}else if(!this.$VodWithCommercialBreak6.hasReceivedAdStory(l.getIndex())){p=c('CommercialBreakNoAdReason').NO_VIDEO_AD;}else if(c('Visibility').isHidden()&&c('CommercialBreakExperiments').skipInstreamAdWhenInvisible)p=c('CommercialBreakNoAdReason').INACTIVE_TAB;if(!p&&!this.$VodWithCommercialBreak2.isBroadcast)this.$VodWithCommercialBreak4.emit('commercialBreak/vodBreakStarting',m);if(n>this.$VodWithCommercialBreak2.vodAllowStartTimeDeltaMs){if(!this.$VodWithCommercialBreak2.isBroadcast)n=Math.min(n,h.RECHECK_START_MS);this.$VodWithCommercialBreak10=setTimeout(function(){return this.$VodWithCommercialBreak21(j);}.bind(this),n);return;}if(!p){this.$VodWithCommercialBreak6.onStartCommand({index:l.getIndex(),commercial_break_start_time_ms:m});if(!this.$VodWithCommercialBreak2.isBroadcast)this.$VodWithCommercialBreak4.emit('commercialBreak/vodBreakStarted');this.$VodWithCommercialBreak11=0;this.$VodWithCommercialBreak12=0;}else this.$VodWithCommercialBreak6.startBreakWithNoVideoAd(p,m,l.getIndex());this.$VodWithCommercialBreak8=j;this.$VodWithCommercialBreak10=null;};i.prototype.$VodWithCommercialBreak17=function(){'use strict';return this.$VodWithCommercialBreak4.getCurrentTimePosition()*c('DateConsts').MS_PER_SEC;};f.exports=i;}),null);